{"version":3,"file":"scripts.js","mappings":"ycAAA,eACA,SAEa,EAAAA,cAAiBC,IAE1B,IAAIC,EAAe,CAAC,EAapB,OAZAD,EAASE,SAAQ,CAACC,EAAOC,KAEjBC,QAAQC,IAAIL,EAAQG,IAIpBG,MAAMC,QAAQP,EAAOG,MACrBH,EAAOG,GAAO,CAACH,EAAOG,KAE1BH,EAAOG,GAAKK,KAAKN,IANbF,EAAOG,GAAOD,CAMK,IAGpBF,CAAM,EAGJ,EAAAS,OAAS,CAACC,EAAkBC,KAErC,MAAMZ,GAAW,IAAAD,eAAcY,EAAEX,UAGvBa,EAAMC,KAAKC,MAAMf,EAASgB,SAChCC,QAAQC,IAAIL,GAEZM,MAAMC,+CAAoB,CACtBC,OAAQ,OACRC,QAAS,CACL,OAAU,oCACV,eAAgB,oBAEpBC,KAAMvB,EAASgB,UAElBQ,MAAK,SAAUC,GAEZ,OADAR,QAAQC,IAAIO,GACLA,EAASC,MACpB,IACCF,MAAK,SAAUG,GACZV,QAAQC,IAAIS,IAEZ,IAAAC,SAAQD,EAAOE,QACf,IAAAC,UAAS,QAASjB,EAAIkB,IAAIC,IAC9B,IACCC,OAAO,SAAUC,GACdjB,QAAQC,IAAI,iBAAkBgB,EAClC,GAAE,EAKG,EAAAC,QAAU,IAAY,OAAD,6BAE9B,OAAO,IAAIC,SAAS,CAACC,EAAQC,KAEzB,MAAMC,EAAKC,SAASC,cAAc,QASlCF,EAAGG,iBAAiB,UALF/B,IACdA,EAAEgC,iBACF,IAAIC,SAASL,EAAG,IAIpBA,EAAGG,iBAAiB,YAAmBG,GAAY,OAAD,6BAC9CR,GAAQ,IAAA3B,QAAOmC,EAAGN,EAAG3B,IACzB,KAAE,GAEV,G,iFCxEa,EAAAkB,SAAW,CAACgB,EAAgBd,KAEnBQ,SAASO,eAAe,kBAChCC,MAAMC,WAAa,UAEjBT,SAASO,eAAe,cAChCG,UAAY,sDAAsDJ,SAAcd,GAAK,C,gFCNhF,EAAAJ,QAAWC,IAEpB,MAEMsB,EAAYX,SAASO,eAAe,qBAC1CI,EAAUD,UAAY,GAEtB,MAAME,EAAIZ,SAASa,cAAc,WACjCD,EAAEJ,MAAMM,MAAQ,OAChBF,EAAEJ,MAAMO,OAAS,OACjBH,EAAEJ,MAAMQ,SAAW,WAEnB,MAAMC,EAAMjB,SAASa,cAAc,OACnCI,EAAIC,IAAMtC,8CAAsBS,EAChC4B,EAAIT,MAAMM,MAAQ,OAClBG,EAAIT,MAAMO,OAAS,OAEnBH,EAAEO,YAAYF,GAEdN,EAAUQ,YAAYP,EAAE,C,GClBxBQ,EAA2B,CAAC,GCChC,EDEA,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUM,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAGpEK,EAAOD,OACf,CCtBA,MAEA9B,U","sources":["webpack://composedb with transport union indexer/./src/factories/form.factory.ts","webpack://composedb with transport union indexer/./src/factories/frame.factory.ts","webpack://composedb with transport union indexer/./src/factories/preview.factory.ts","webpack://composedb with transport union indexer/webpack/bootstrap","webpack://composedb with transport union indexer/./src/index.ts"],"sourcesContent":["import { showLink } from \"./frame.factory\";\nimport { preview } from \"./preview.factory\";\n\nexport const parseFormData = (formData: FormData) => {\n\n    let object: any  = {};\n    formData.forEach((value, key) => {\n        // Reflect.has in favor of: object.hasOwnProperty(key)\n        if(!Reflect.has(object, key)){\n            object[key] = value;\n            return;\n        }\n        if(!Array.isArray(object[key])){\n            object[key] = [object[key]];    \n        }\n        object[key].push(value);\n    });\n\n    return object;\n}\n\nexport const submit = (e: FormDataEvent, id: string) => {\n\n    const formData = parseFormData(e.formData);\n    const DOMAIN = \"https://renderer.autonomous-times.com\" // localhost:3009\n\n        const eas = JSON.parse(formData.raw_eas);\n        console.log(eas);\n\n        fetch(DOMAIN + '/create', { \n            method: 'post',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'Content-Type': 'application/json'\n            },\n            body: formData.raw_eas\n        })\n        .then(function (response) {\n            console.log(response);\n            return response.json();\n        })\n        .then(function (result) {\n            console.log(result);\n\n            preview(result.image);\n            showLink(\"runV1\", eas.sig.uid)\n        })\n        .catch (function (error) {\n            console.log('Request failed', error);\n        });\n\n}\n\n\nexport const armForm = async () => {\n\n    return new Promise( (resolve,reject) => {\n\n        const el = document.querySelector('form') as HTMLFormElement;\n\n        let self = this;\n\n        const onSubmit = (e: Event) => {\n            e.preventDefault();\n            new FormData(el);\n        }\n    \n        el.addEventListener(\"submit\", onSubmit );\n        el.addEventListener(\"formdata\", async (cc: any) => {\n            resolve(submit(cc,el.id));\n        });\n    });\n}","export const showLink = (flavor: string, uid: string) => {\n\n    const container = document.getElementById(\"link_container\");\n    container.style.visibility = \"visible\";\n\n    const div = document.getElementById(\"frame_link\");\n    div.innerHTML = `https://unforgettable.autonomous-times.com/?flavor=${flavor}&uid=${uid}`;\n}","export const preview = (image : string) => {\n\n    const DOMAIN = \"https://frames.autonomous-times.com\" // localhost:8880\n\n    const container = document.getElementById(\"preview_container\");\n    container.innerHTML = \"\";\n\n    const a = document.createElement(\"article\");\n    a.style.width = \"100%\";\n    a.style.height = \"auto\";\n    a.style.position = \"relative\";\n\n    const img = document.createElement(\"img\");\n    img.src = DOMAIN + \"/frames/\" + image;\n    img.style.width = \"100%\";\n    img.style.height = \"auto\";\n\n    a.appendChild(img);\n\n    container.appendChild(a);\n\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { armForm } from \"./factories/form.factory\";\n\narmForm()"],"names":["parseFormData","formData","object","forEach","value","key","Reflect","has","Array","isArray","push","submit","e","id","eas","JSON","parse","raw_eas","console","log","fetch","DOMAIN","method","headers","body","then","response","json","result","preview","image","showLink","sig","uid","catch","error","armForm","Promise","resolve","reject","el","document","querySelector","addEventListener","preventDefault","FormData","cc","flavor","getElementById","style","visibility","innerHTML","container","a","createElement","width","height","position","img","src","appendChild","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call"],"sourceRoot":""}